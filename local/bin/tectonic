#!/usr/bin/env bash

workdir="$PWD"
dir="$PWD"

for _ in 1 2 3; do
    if [ -f "$dir/Tectonic.toml" ]; then
        workdir="$dir"
        break
    fi
    dir="$(dirname "$dir")"
done

podman run --rm -it \
    -v "$HOME/.cache/Tectonic:/root/.cache/Tectonic" \
    -v "$HOME/Documentos/Proyectos/utils/latex:/latex" \
    -v "$workdir:/data" \
    -w /data \
    dxjoke/tectonic-docker \
    tectonic "$@"
