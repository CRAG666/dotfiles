# █░█░█ █ █▄░█ █▀▄ █▀█ █░█░█   █▀█ █░█ █░░ █▀▀ █▀
# ▀▄▀▄▀ █ █░▀█ █▄▀ █▄█ ▀▄▀▄▀   █▀▄ █▄█ █▄▄ ██▄ ▄█

# ═══════════════════════════════════════════════════════════
# TILE RULES
# ═══════════════════════════════════════════════════════════

# Picture-in-Picture
windowrule {
    name = hyde_picture_in_picture
    match:title = ^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
    tag = +picture-in-picture
    tag = +hyde_picture_in_picture
    float = true
    keep_aspect_ratio = true
    move = (monitor_w*0.73) (monitor_h*0.72)
    size = (monitor_w*0.25) (monitor_h*0.25)
    pin = true
}

windowrule {
    name = freerdp-tile
    match:class = sdl-freerdp3
    tile = on
}

windowrule {
    name = xfreerdp-tile
    match:class = xfreerdp
    tile = on
}

# ═══════════════════════════════════════════════════════════
# OPACITY RULES
# ═══════════════════════════════════════════════════════════

windowrule {
    name = pwvucontrol-opacity
    match:class = ^(.*pwvucontrol)$
    opacity = 0.80 override 0.70 override
    size = (monitor_w*0.7) (monitor_h*0.7)
    float = on
}

windowrule {
    name = zen-browser-config
    match:class = ^(zen.*)$
    opacity = 0.90 override 0.70 override
    idle_inhibit = fullscreen
}

windowrule {
    name = betterbird-opacity
    match:class = ^(.*betterbird.*)$
    opacity = 0.90 override 0.70 override
}

windowrule {
    name = yazi-opacity
    match:title = ^(yazi)$
    opacity = 0.80 override 0.70 override
}

windowrule {
    name = impala-opacity
    match:title = ^(impala)$
    opacity = 0.80 override 0.70 override
}

windowrule {
    name = bluetui-opacity
    match:title = ^(bluetui)$
    opacity = 0.80 override 0.70 override
}

windowrule {
    name = termusic-opacity
    match:title = ^(termusic)$
    opacity = 0.80 override 0.70 override
}

windowrule {
    name = nwg-look-opacity
    match:class = ^(nwg-look)$
    opacity = 0.80 override 0.80 override 1.0 override
    float = on
}

windowrule {
    name = qtct-opacity
    match:class = ^(qt.ct)$
    opacity = 0.80 override 0.80 override 1.0 override
    float = on
}

windowrule {
    name = nm-connection-editor-opacity
    match:class = ^(nm-connection-editor)$
    opacity = 0.80 override 0.70 override 1.0 override
    float = on
}

windowrule {
    name = polkit-kde-opacity
    match:class = ^(org.kde.polkit-kde-authentication-agent-1)$
    opacity = 0.80 override 0.70 override 1.0 override
    float = on
}

windowrule {
    name = polkit-gnome-opacity
    match:class = ^(polkit-gnome-authentication-agent-1)$
    opacity = 0.80 override 0.70 override 1.0 override
}

windowrule {
    name = portal-gtk-opacity
    match:class = ^(org.freedesktop.impl.portal.desktop.gtk)$
    opacity = 0.80 override 0.70 override 1.0 override
}

windowrule {
    name = portal-hyprland-opacity
    match:class = ^(org.freedesktop.impl.portal.desktop.hyprland)$
    opacity = 0.80 override 0.70 override 1.0 override
}

windowrule {
    name = spotify-opacity
    match:class = ^([Ss]potify)$
    opacity = 0.70 override 0.70 override 1.0 override
}

# ═══════════════════════════════════════════════════════════
# FLOAT RULES
# ═══════════════════════════════════════════════════════════

windowrule {
    name = zen-pip
    match:class = ^(zen)$
    match:title = ^(Picture-in-Picture)$
    float = on
}

windowrule {
    name = zen-library
    match:class = ^(zen)$
    match:title = ^(Library)$
    float = on
}

windowrule {
    name = vlc-float
    match:class = ^(vlc)$
    float = on
}

windowrule {
    name = imv-float
    match:class = ^(imv)$
    float = on
    size = (monitor_w*0.8) (monitor_h*0.8)
}

windowrule {
    name = filechooser-float
    match:class = ^(filechooser)$
    float = on
    size = (monitor_w*0.8) (monitor_h*0.8)
}

windowrule {
    name = yad-float
    match:class = ^(yad)$
    float = on
}

windowrule {
    name = hyprland-share-picker-float
    match:class = ^(hyprland-share-picker)$
    float = on
}

windowrule {
    name = dialog
    match:class = ^(dialog)$
    size = (monitor_w*0.8) (monitor_h*0.8)
    float = on
}

windowrule {
    name = download-dialog
    match:class = ^(download)$
    size = (monitor_w*0.08) (monitor_h*0.06)
    float = on
}

windowrule {
    name = open-file-dialog
    match:title = ^(Open File)$
    size = (monitor_w*0.08) (monitor_h*0.06)
    float = on
}

windowrule {
    name = save-file-dialog
    match:title = ^(Save File)$
    size = (monitor_w*0.08) (monitor_h*0.06)
    float = on
}

windowrule {
    name = volume-control
    match:title = ^(Volume Control)$
    size = (monitor_w*0.6) (monitor_h*0.6)
    float = on
}

windowrule {
    name = xdg-portal-gtk
    match:class = ^(Xdg-desktop-portal-gtk)$
    size = (monitor_w*0.6) (monitor_h*0.6)
    float = on
}

windowrule {
    name = picture-in-picture
    match:title = ^(Picture-in-Picture)$
    float = on
    pin = on
}

windowrule {
    name = choose-files
    match:title = ^(Choose Files)$
    float = on
}

windowrule {
    name = save-as
    match:title = ^(Save As)$
    float = on
}

windowrule {
    name = confirm-replace
    match:title = ^(Confirm to replace files)$
    float = on
}

windowrule {
    name = file-operation
    match:title = ^(File Operation Progress)$
    float = on
}

windowrule {
    name = xdg-portal-float
    match:class = ^(xdg-desktop-portal-gtk)$
    float = on
}

# ═══════════════════════════════════════════════════════════
# IDLE INHIBIT RULES
# ═══════════════════════════════════════════════════════════

windowrule {
    name = mpv-idle-inhibit
    match:class = ^(mpv)$
    idle_inhibit = focus
}

windowrule {
    name = firefox-idle-inhibit
    match:class = ^(firefox)$
    idle_inhibit = fullscreen
}

# ═══════════════════════════════════════════════════════════
# XWAYLANDVIDEOBRIDGE
# ═══════════════════════════════════════════════════════════

windowrule {
    name = xwaylandvideobridge
    match:class = ^(xwaylandvideobridge)$
    opacity = 0.0 override 0.0 override
    no_anim = on
    no_focus = on
    no_initial_focus = on
}

# ═══════════════════════════════════════════════════════════
# SHARING INDICATORS (WORKSPACE SPECIAL)
# ═══════════════════════════════════════════════════════════

windowrule {
    name = firefox-sharing-indicator-en
    match:title = ^(Firefox — Sharing Indicator)$
    workspace = special silent
}

windowrule {
    name = firefox-sharing-indicator-es
    match:title = ^(Firefox - Indicador de compartición)$
    workspace = special silent
}

windowrule {
    name = sharing-screen-en
    match:title = ^(.*is sharing (your screen|a window)\.)$
    workspace = special silent
}

windowrule {
    name = sharing-screen-es
    match:title = ^(.*está compartiendo tu pantalla.)$
    workspace = special silent
}

# █░░ ▄▀█ █▄█ █▀▀ █▀█   █▀█ █░█ █░░ █▀▀ █▀
# █▄▄ █▀█ ░█░ ██▄ █▀▄   █▀▄ █▄█ █▄▄ ██▄ ▄█

layerrule = blur true,match:namespace rofi
layerrule = ignore_alpha 0,match:namespace rofi
layerrule = blur true,match:namespace notifications
layerrule = ignore_alpha 0,match:namespace notifications
layerrule = ignore_alpha 0, match:namespace swaync-notification-window
layerrule = no_anim on, match:namespace hyprpicker
layerrule = no_anim on, match:namespace selection
layerrule = blur true,match:namespace logout_dialog
